!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.smacco=n():t.smacco=n()}(window,function(){return function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){const i=e(1).Smacco;t.exports={Smacco:i}},function(t,n,e){!function(t){"use strict";function n(t){"smacco-1.0"==t.standard?this.config=t:console.log("Unsupported standard: "+t.standard)}n._construct=function(t){return new n(t)},n.prototype.csGenerateAccount=function(){var t=this.csGenerateHeaders(),e=[];this.config.rules?e=this.config.rules:this.config.rule&&e.push(this.config.rule);var i=[];return this.config.pubkey_list&&(i=this.config.pubkey_list),t+=n.csGeneratePubKeyList(i),"single"==this.config.input_type&&(t+=n.csGenerateSingleAccount(e,i,!this.config.default_rule&&!this.config.inline_last)),"array"==this.config.input_type&&(t+=n.csGenerateArrayAccount(e,i,!this.config.default_rule&&!this.config.inline_last)),t+=this.csGenerateFooter()},n.prototype.csGenerateHeaders=function(){return"using Neo.SmartContract.Framework;\nusing Neo.SmartContract.Framework.Services.Neo;\nusing Neo.SmartContract.Framework.Services.System;\nnamespace NeoContract1 {\npublic class Contract1 : SmartContract {\n"},n.prototype.csGenerateFooter=function(){var t="";return("disabled"==this.config.inline_last||this.config.default_rule)&&("DENY_ALL"==this.config.default_rule?t+="return false;\n":"ALLOW_ALL"==this.config.default_rule&&(t+="return true;\n")),t+="}\n}\n}\n"},n.csGeneratePubKeyList=function(t){for(var n="",e=0;e<t.length;e++)n+="public static readonly byte[] pubkey_"+e+' = "'+t[e]+'".HexToBytes();\n';return n},n.csGenerateSingleAccount=function(t,e,i=!0){for(var o="public static bool Main(byte[] signature){\n",r=0;r<t.length;r++){var u=n.csGenerateRule(t[r],e,i&&r==t.length-1);o=u.methods+o+u.main_code}return o},n.csGenerateArrayAccount=function(t,e,i=!0){for(var o="public static bool Main(byte[][] signatures){\n",r=0;r<t.length;r++){var u=n.csGenerateRule(t[r],e,i&&r==t.length-1);o=u.methods+o+u.main_code}return o},n.csGenerateRule=function(t,e,i=!1){var o=n.csGenerateCondition(t.condition,e);if(i)var r="return ("+o.condition_code+");\n";else{r="if("+o.condition_code+")\nreturn ";"DENY_IF"==t.rule_type?r+="false;\n":"ALLOW_IF"==t.rule_type&&(r+="true;\n")}return{main_code:r,methods:o.methods}},n.csGenerateCondition=function(t,e){var i="",o="";if("CHECKMULTISIG"==t.condition_type){var r=e;t.pubkeys&&(r=t.pubkeys);var u=-1;t.minimum_required&&(u=t.minimum_required),-1==u&&t.signatures&&(u=t.signatures.length);var s="";t.condition_name&&(s=t.condition_name),""==s&&(s="CheckMultiSig"+u+"_"+r.length),i=s+"(signatures)",o="public static bool "+s+"(byte[][] signatures){\nbyte[][] vpub = new[] {";for(var c=0;c<r.length;c++)o+="pubkey_"+c,c!=r.length-1&&(o+=", ");if(o+="};\nbyte[][] vsig = new[] {",t.signatures)for(var a=0;a<t.signatures.length;a++)o+="signatures["+a+"]",a!=t.signatures.length-1&&(o+=", ");else if(t.minimum_required)for(a=0;a<t.minimum_required;a++)o+="signatures["+a+"]",a!=t.minimum_required-1&&(o+=", ");o+="};\nreturn VerifySignatures(vsig, vpub);\n",o+="}\n"}else if("CHECKSIG"==t.condition_type){var l="0";t.pubkey&&(l=t.pubkey),i="VerifySignature(signature, pubkey_"+l+")",o=""}else if("TIMESTAMP_LESS"==t.condition_type){var f=0;t.timestamp&&(f=parseInt(String(t.timestamp))),i="Blockchain.GetHeader(Blockchain.GetHeight()).Timestamp < "+f,o=""}else if("SELF_TRANSFER"==t.condition_type){s="SelfTransfer";t.condition_name&&(s=t.condition_name),i=s+"()",o="public static bool "+s+"(){\nTransaction tx = (Transaction)ExecutionEngine.ScriptContainer;\nTransactionOutput[] outputs = tx.GetOutputs();\nforeach (TransactionOutput output in outputs)\nif (output.ScriptHash != ExecutionEngine.ExecutingScriptHash)\nreturn false;\nreturn true;\n",o+="}\n"}else if("ONLY_NEO"==t.condition_type){s="OnlyNeo";t.condition_name&&(s=t.condition_name),i=s+"()",o="private static readonly byte[] NeoAssetId = { 155, 124, 255, 218, 166, 116, 190, 174, 15, 147, 14, 190, 96, 133, 175, 144, 147, 229, 254, 86, 179, 74, 92, 34, 12, 205, 207, 110, 252, 51, 111, 197 };\n",o+="public static bool "+s+"(){\nTransaction tx = (Transaction)ExecutionEngine.ScriptContainer;\nTransactionOutput[] outputs = tx.GetOutputs();\nforeach (TransactionOutput output in outputs)\nif (output.AssetId != NeoAssetId)\nreturn false;\nreturn true;\n",o+="}\n"}else if("ONLY_GAS"==t.condition_type){s="OnlyGas";t.condition_name&&(s=t.condition_name),i=s+"()",o="private static readonly byte[] GasAssetId = { 231, 45, 40, 105, 121, 238, 108, 177, 183, 230, 93, 253, 223, 178, 227, 132, 16, 11, 141, 20, 142, 119, 88, 222, 66, 228, 22, 139, 113, 121, 44, 96 };\n",o+="public static bool "+s+"(){\nTransaction tx = (Transaction)ExecutionEngine.ScriptContainer;\nTransactionOutput[] outputs = tx.GetOutputs();\nforeach (TransactionOutput output in outputs)\nif (output.AssetId != GasAssetId)\nreturn false;\nreturn true;\n",o+="}\n"}else if("AND"==t.condition_type){i="",o="";for(var d=0;d<t.conditions.length;d++){i+="("+(p=n.csGenerateCondition(t.conditions[d],e)).condition_code+")",d<t.conditions.length-1&&(i+=" && "),o+=p.methods}}else if("OR"==t.condition_type)for(i="",o="",d=0;d<t.conditions.length;d++){var p;i+="("+(p=n.csGenerateCondition(t.conditions[d],e)).condition_code+")",d<t.conditions.length-1&&(i+=" || "),o+=p.methods}else i="true",o="";return{condition_code:i,methods:o}},t.Smacco=n}(n)}])});